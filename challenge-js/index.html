<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jenna James Poker Tool Suite - Modern Nightlife</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
    <h1>Poker Tool Suite Dashboard</h1>

<div class="section">
        <h3>Statistical Simulator</h3>
        <p>Run random hands to check mathematical probabilities.</p>
        <div style="display: flex; gap: 15px;">
            <button class="btn" id="simBtn">Run Simulation</button>
            <button class="btn btn-secondary" id="resetSimBtn">Clear Results</button>
        </div>
        
        <div id="progressContainer">
            <div id="progressBar"></div>
        </div>

        <div id="simResults" class="results" style="display:none;"></div>
    </div>

    <div class="section">
        <h3>Quick Play: Alice vs Bob</h3>
        <button class="btn" id="playBtn">Deal New Round</button>
        
        <div id="gameDisplay" style="display:none;">
            <p><strong>Board:</strong></p>
            <div id="boardCards" class="card-display"></div>
            
            <div style="display: flex; justify-content: space-around; text-align: center; margin-top: 20px;">
                <div class="player-slot">
                    <p><strong>Alice</strong></p>
                    <div id="aliceCards" class="card-display"></div>
                    <div id="aliceRank" class="results"></div>
                </div>
                <div class="player-slot">
                    <p><strong>Bob</strong></p>
                    <div id="bobCards" class="card-display"></div>
                    <div id="bobRank" class="results"></div>
                </div>
            </div>
            <h2 id="winnerAnnouncement" style="text-align:center; color: #00f5ff; margin-top: 30px; text-shadow: 0 0 10px rgba(0, 245, 255, 0.5);"></h2>
        </div>
    </div>
</div>

<script src="bundle.js"></script>

<script>
    const suitIcons = { 's': '♠️', 'h': '❤️', 'd': '♦️', 'c': '♣️' };

    /**
     * Helper to render cards with neon-appropriate colors
     */
    function getIconicCard(cardStr) {
        const suit = cardStr.slice(-1);
        const val = cardStr.slice(0, -1);
        const colorClass = (suit === 'h' || suit === 'd') ? 'red' : '';
        return `<span class="${colorClass}">${val}${suitIcons[suit]}</span> `;
    }

    /* --- GAME LOGIC --- */
    document.getElementById('playBtn').addEventListener('click', () => {
        if (typeof window.playRound === "function") {
            const gameData = window.playRound();
            document.getElementById('gameDisplay').style.display = 'block';
            document.getElementById('boardCards').innerHTML = gameData.community.map(getIconicCard).join('');
            document.getElementById('aliceCards').innerHTML = gameData.players[0].holeCards.map(getIconicCard).join('');
            document.getElementById('bobCards').innerHTML = gameData.players[1].holeCards.map(getIconicCard).join('');
            document.getElementById('aliceRank').innerText = gameData.players[0].finalRankName;
            document.getElementById('bobRank').innerText = gameData.players[1].finalRankName;
            document.getElementById('winnerAnnouncement').innerText = gameData.winnerText;
        }
    });

    /* --- SIMULATOR LOGIC --- */
    const simBtn = document.getElementById('simBtn');
    const resetBtn = document.getElementById('resetSimBtn');
    const progressBar = document.getElementById('progressBar');
    const progressContainer = document.getElementById('progressContainer');
    const simResults = document.getElementById('simResults');

    simBtn.addEventListener('click', () => {
        const trials = 10000; 
        simBtn.disabled = true;
        progressContainer.style.display = 'block';
        simResults.style.display = 'none';
        progressBar.style.width = '0%';

        // Communicates with iterative simulation logic in main.js
        window.runSimulationIterative(trials, (progress, finalTable) => {
            progressBar.style.width = progress + '%';
            
            if (finalTable) {
                simResults.innerHTML = finalTable;
                simResults.style.display = 'block';
                simBtn.disabled = false;
                simBtn.innerText = "Rerun Simulation";
            }
        });
    });

    resetBtn.addEventListener('click', () => {
        simResults.style.display = 'none';
        progressContainer.style.display = 'none';
        progressBar.style.width = '0%';
        simBtn.innerText = "Run Simulation";
        simBtn.disabled = false;
    });
</script>
</body>
</html>